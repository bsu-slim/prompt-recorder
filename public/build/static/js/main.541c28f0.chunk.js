(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,a){},294:function(e,t,a){e.exports=a(489)},300:function(e,t,a){},324:function(e,t){},327:function(e,t){e.exports={SampleRate:16e3,Channels:1,socketServer:"http://localhost:8000"}},489:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(67),i=a.n(r),c=a(36),l=a(59),s=(a(299),a(300),a(511)),m=a(284),d=a(16),u=a(17),p=a(19),h=a(18),v=a(20),g=a(508),f=a(50),E=a(253),b=a.n(E),y=a(327),R=b()(y.socketServer);function w(e){R.on("reconnect",function(t){return e(t)})}var D=R;function I(e){D.on("dataRoom",function(t){return e(t)})}function k(e){D.on("newRoom",function(t){return e(t)})}function C(e){D.emit("getPromptList",e)}function S(e){D.emit("getRecordingList",e)}var j=function(e){function t(){var e,a;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).onDisconnect=function(t){var a={message:"Client disconnected from server: ".concat(t,"."),type:"error"};e.onNewMessage(a)},e.onReconnect=function(t){var a={message:"Client reconnected to server on attempt ".concat(t,"."),type:"success"};e.onNewMessage(a)},e.onReconnectAttempt=function(t){var a={message:"Client is attempting to reconnect to the server. Attempt: ".concat(t,"."),type:"warning"};e.onNewMessage(a)},e.onNewMessage=function(t){var a=e.state.messages;switch(t.type){case"success":a.push(o.a.createElement(s.a,{as:"h5",color:"green",key:a.length+1},o.a.createElement(s.a,{as:"span",className:"msg-time",color:"violet"},t.time," "),t.message));break;case"error":a.push(o.a.createElement(s.a,{as:"h5",color:"red",key:a.length+1},o.a.createElement(s.a,{as:"span",className:"msg-time",color:"violet"},t.time," "),t.message));break;case"warning":a.push(o.a.createElement(s.a,{as:"h5",color:"yellow",key:a.length+1},o.a.createElement(s.a,{as:"span",className:"msg-time",color:"violet"},t.time," "),t.message));break;default:a.push(o.a.createElement(s.a,{as:"h5",color:"violet",key:a.length+1},o.a.createElement(s.a,{as:"span",className:"msg-time",color:"violet"},t.time," "),t.message))}e._ismounted&&e.setState({messages:a},function(){var e=document.getElementById("log-scroll");e.scrollTop=e.scrollHeight})},e.state={messages:[]},a=e.onNewMessage,D.on("m",function(e){return a(e)}),function(e){R.on("disconnect",function(t){return e(t)})}(e.onDisconnect),w(e.onReconnect),function(e){R.on("reconnect_attempt",function(t){return e(t)})}(e.onReconnectAttempt),e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"render",value:function(){var e=this.state.messages;return o.a.createElement(g.a,{id:"log",fluid:!0,color:"green"},o.a.createElement(g.a.Content,null,o.a.createElement(g.a.Header,null,o.a.createElement(f.a,{name:"file alternate"}),"Application Log"),o.a.createElement(g.a.Description,{id:"log-scroll"},e)))}}]),t}(o.a.Component),O=a(127),N=a.n(O),P=a(502),A=a(498),x=a(283),M=a(510),L=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).onClick=function(e,t){a.props.history.push(t.value)},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.steps,t=[],a=!0,n=!1,r=void 0;try{for(var i,c=e.entries()[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var l=i.value,s=Object(x.a)(l,2),m=s[0],d=s[1];switch(d.state){case"completed":t.push(o.a.createElement(M.a,{completed:!0,key:m,description:d.description,title:d.title,onClick:this.onClick,value:d.href}));break;case"active":t.push(o.a.createElement(M.a,{active:!0,key:m,description:d.description,title:d.title,onClick:this.onClick,value:d.href}));break;default:t.push(o.a.createElement(M.a,{disabled:!0,key:m,description:d.description,title:d.title,onClick:this.onClick,value:d.href}))}}}catch(u){n=!0,r=u}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return o.a.createElement(M.a.Group,{widths:e.length,size:"mini",ordered:!0},t)}}]),t}(o.a.Component),T=Object(l.f)(L),F=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).onJoin=function(e){var t=e.target[0].value;t&&""!==t&&!t.includes("admin")&&!t.includes("Admin")&&t.match(/^[-_.\w\s]*$/)&&a.props.history.push(N.a.join(window.location.pathname,t))},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.admin,t=o.a.createElement(T,{steps:[{state:"active",title:"Join a Room",description:"Enter a room to join",href:"/"},{state:"disabled",title:"Provide an ID",description:"Identify the recorder",href:"#"},{state:"disabled",title:"Record",description:"Record prompt readings",href:"#"}]});return o.a.createElement(g.a,{fluid:!0,color:"violet"},o.a.createElement(g.a.Content,null,e?"":t,o.a.createElement(g.a.Description,null,o.a.createElement(s.a,{as:"h3",color:"violet"},"Join A Room:"),o.a.createElement(P.a,{onSubmit:this.onJoin},o.a.createElement(P.a.Group,null,o.a.createElement(P.a.Field,{width:16},o.a.createElement("label",null,"Room Name:"),o.a.createElement(A.a,{placeholder:"myRoom1234",name:"room",id:"room",action:{color:"violet",labelPosition:"right",icon:"arrow circle right",content:"Join Room",type:"sumbit"}})))))))}}]),t}(o.a.Component),U=Object(l.f)(F);a(122);var _=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(s.a,{as:"h1",color:"violet"},"Prompt Recorder V2.0 Admin Panel"),o.a.createElement(m.a,{columns:"equal",padded:!0},o.a.createElement(m.a.Column,null,o.a.createElement(U,{admin:"admin"})),o.a.createElement(m.a.Column,null,o.a.createElement(j,null))))},K=a(505),G=a(490),B=a(506);var z=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).onPromptAdd=function(t,a){var n;n={promptID:t,roomID:e.props.settings.roomID,roomKey:e.props.settings.roomKey},D.emit("newPromptList",n),e.props.sendSearch()},e.onPromptRemove=function(t,a){var n;n={promptID:t,roomID:e.props.settings.roomID,roomKey:e.props.settings.roomKey},D.emit("deletePromptList",n),e.props.sendSearch()},e.state={search:""},e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.prompts,a=this.props.search;return o.a.createElement("div",{id:"prompts"},o.a.createElement(s.a,{color:"violet",as:"h4"},"Prompt Manager:"),o.a.createElement(P.a,null,o.a.createElement(P.a.Group,{widths:16},o.a.createElement(P.a.Field,{width:16},o.a.createElement("label",null,"Search Prompts:"),o.a.createElement(A.a,{fluid:!0,placeholder:"Search...",name:"search",action:{color:"violet",labelPosition:"right",icon:"search",content:"Search",onClick:this.props.sendSearch},onChange:this.props.onUpdateSearch,value:a})))),o.a.createElement(s.a,{as:"h5"},"Prompts Available:"),o.a.createElement(B.a,{className:"prompt-list-manager",divided:!0,verticalAlign:"middle"},t.length>0?t.map(function(t,a){return t.promptlistExistsForRoom?"":o.a.createElement(B.a.Item,{key:a},o.a.createElement(B.a.Content,{floated:"right"},o.a.createElement(G.a,{color:"green",content:"Add",icon:"plus circle",size:"mini",labelPosition:"right",onClick:e.onPromptAdd.bind(null,t.promptID)})),o.a.createElement(f.a,{name:"chat"}),o.a.createElement(B.a.Content,null,t.prompt))}):o.a.createElement(s.a,{as:"h2",textAlign:"center",icon:!0,disabled:!0},o.a.createElement(f.a,{name:"list alternate",circular:!0}),o.a.createElement(s.a.Content,null,"No existing prompts..."))),o.a.createElement(s.a,{as:"h5"},"Prompts In Session:"),o.a.createElement(B.a,{className:"prompt-list-manager",divided:!0,verticalAlign:"middle"},t.length>0?t.map(function(t,a){return t.promptlistExistsForRoom?o.a.createElement(B.a.Item,{key:a},o.a.createElement(B.a.Content,{floated:"right"},o.a.createElement(G.a,{color:"red",content:"Remove",icon:"times circle",size:"mini",labelPosition:"right",onClick:e.onPromptRemove.bind(null,t.promptID)})),o.a.createElement(f.a,{name:"chat"}),o.a.createElement(B.a.Content,null,t.prompt)):""}):o.a.createElement(s.a,{as:"h2",textAlign:"center",icon:!0,disabled:!0},o.a.createElement(f.a,{name:"list alternate",circular:!0}),o.a.createElement(s.a.Content,null,"No existing prompts..."))))}}]),t}(o.a.Component),H=a(497);var V,J,W,q,Y=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).handleRoomActive=function(e,t){var n=a.props.settings;n.active=!0===t.checked?1:0,function(e){D.emit("updateRoomActive",e)}(n)},a.handleRoomShuffle=function(e,t){var n=a.props.settings;n.shuffle=!0===t.checked?1:0,function(e){D.emit("updateRoomShuffle",e)}(n)},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.settings;return o.a.createElement("div",{id:"prompts"},o.a.createElement(s.a,{color:"violet",as:"h4"},"Settings Manager:"),o.a.createElement(P.a,null,o.a.createElement(P.a.Group,null,o.a.createElement(P.a.Field,null,o.a.createElement(H.a,{color:"violet",name:"active",label:o.a.createElement("label",null,"Allow Users To Record? (Activate Session)"),checked:0!==e.active,onChange:this.handleRoomActive}))),o.a.createElement(P.a.Group,null,o.a.createElement(P.a.Field,null,o.a.createElement(H.a,{color:"violet",name:"shuffle",label:o.a.createElement("label",null,"Randomize Prompt Order? (Knuth Shuffle)"),checked:0!==e.shuffle,onChange:this.handleRoomShuffle,disabled:!!e.active})))))}}]),t}(o.a.Component),$=a(504),Q=a(509),X=a(507),Z=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).onLanguageChange=function(t,a){var n=a.value;return e.setState({language:n})},e.onFileSelect=function(t){if(t.target.files&&t.target.files[0]){var a=t.target.files[0];e.setState({file:a});var n=new FileReader;n.addEventListener("load",function(t){for(var a=t.target.result.split("\n"),n=0;n<a.length;n++)a[n]={prompt:a[n]};e.setState({prompts:a})}),n.readAsBinaryString(a)}},e.onCreate=function(t){e.state.prompts.forEach(function(t){!function(e){D.emit("newPrompt",e)}({prompt:t.prompt,add:e.state.add,roomID:e.props.room.roomID,roomKey:e.props.room.roomKey,languageID:1})}),e.setState({prompts:[]}),document.getElementById("prompt-file").value=""},e.handleAddToggle=function(){e.setState({add:!e.state.add})},e.state={prompts:[],language:1,add:!1,file:""},e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.languages,t=this.state.language,a=this.state.add,n=[];return e.forEach(function(e){n.push({key:e.languageID+"-lang",text:"".concat(e.languageName," (").concat(e.languageTag,")"),value:e.languageID})}),o.a.createElement("div",{id:"prompts"},o.a.createElement(s.a,{color:"violet",as:"h4"},"Import Prompts From File:"),o.a.createElement(P.a,{id:"prompt-file-create",className:"prompt-file-form"},o.a.createElement(P.a.Field,null,o.a.createElement(H.a,{color:"violet",name:"add",label:o.a.createElement("label",null,"Auto Add To Current Room? "),checked:a,onChange:this.handleAddToggle})),o.a.createElement(P.a.Field,null,o.a.createElement("label",null,"Prompt File\xa0",o.a.createElement($.a,{trigger:o.a.createElement(f.a,{name:"help circle"}),flowing:!0,hoverable:!0},o.a.createElement("div",{className:"file-format"},o.a.createElement("h4",null,"Prompt File Format:"),o.a.createElement("p",null,"A list of prompts in a text file, new-line ('\\n') delimited like the following:"),o.a.createElement(Q.a,null,o.a.createElement("p",null,"This is prompt 1. ",o.a.createElement("br",null),"This is prompt 2. ",o.a.createElement("br",null),"This is prompt 3. ",o.a.createElement("br",null))))),":"),o.a.createElement("input",{type:"file",id:"prompt-file",onChange:this.onFileSelect})),o.a.createElement(P.a.Field,null,o.a.createElement("label",null,"Prompt Language:"),o.a.createElement(X.a,{fluid:!0,selection:!0,onChange:this.onLanguageChange,options:n,value:t})),o.a.createElement(P.a.Field,{id:"prompts-in-file"},o.a.createElement("label",null,"Prompts Recognized In Selected File:"),o.a.createElement(B.a,{className:"prompt-list",divided:!0,verticalAlign:"middle"},this.state.prompts.length>0?this.state.prompts.map(function(e,t){return o.a.createElement(B.a.Item,{key:t},o.a.createElement(B.a.Content,null,e.prompt))}):o.a.createElement(s.a,{as:"h2",textAlign:"center",icon:!0,disabled:!0},o.a.createElement(f.a,{name:"list alternate",circular:!0}),o.a.createElement(s.a.Content,null,"No existing prompts..."))),o.a.createElement(G.a.Group,{floated:"right"},o.a.createElement(G.a,{type:"button",color:"green",onClick:this.onCreate,icon:"plus circle",content:"Create Prompt(s)",labelPosition:"right"})))))}}]),t}(o.a.Component),ee=a(499),te=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).getSec=function(e){return Math.floor(e/1e3)},e.getMin=function(e){return Math.floor(e/60)},e.getExtraSec=function(e){return e%60},e.togglePlay=function(){e.state.playing?e.audio.current.pause():e.audio.current.play()},e.handleUpdate=function(t){var a=t.target;a&&e.setState({location:Math.floor(1e3*a.currentTime),percent:Math.floor(1e3*a.currentTime)/e.state.duration*100})},e.handlePause=function(t){e.handleUpdate(t),e.setState({playing:!1})},e.handlePlay=function(t){e.handleUpdate(t),e.setState({playing:!0})},e.handleReplay=function(t){var a=e.audio.current;a.currentTime=0,e.setState({playing:!0,ended:!1,percent:0},function(){return a.play()})},e.handleFwd=function(){var t=1e3*e.audio.current.currentTime,a=e.state.duration,n=a/10;t+n<a?e.audio.current.currentTime=(t+n)/1e3:(e.audio.current.currentTime=a,e.setState({ended:!0}))},e.handleBack=function(){var t=1e3*e.audio.current.currentTime,a=e.state.duration/10;e.audio.current.currentTime=t-a>0?(t-a)/1e3:0,e.setState({ended:!1})},e.handleEnded=function(t){e.setState({playing:!1,ended:!0})},e.handleVolumeChange=function(t){e.setState({volume:t.target.volume})},e.handleVolumeUp=function(){var t=e.audio.current.volume;t+.1<=1&&(e.audio.current.volume=Math.round(10*t+1)/10)},e.handleVolumeDown=function(){var t=e.audio.current.volume;t-.1>=0&&(e.audio.current.volume=Math.round(10*t-1)/10)},e.handleLoad=function(){var t=e.audio.current;t&&e.setState({duration:Math.floor(1e3*t.duration),volume:t.volume})},e.handleDurationChange=function(){var t=e.audio.current;t&&e.setState({duration:Math.floor(1e3*t.duration),volume:t.volume})},e.getAudio=function(t){return e.audio=o.a.createRef(),o.a.createElement("audio",{ref:e.audio,id:"player-current",src:t})},e.state={duration:0,location:0,volume:.5,playing:!1,percent:0,ended:!1,needsReload:!1},e.audio=o.a.createRef(),e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.audio.current;e.addEventListener("loadeddata",this.handleLoad),e.addEventListener("timeupdate",this.handleUpdate),e.addEventListener("play",this.handlePlay),e.addEventListener("pause",this.handlePause),e.addEventListener("ended",this.handleEnded),e.addEventListener("volumechange",this.handleVolumeChange),e.addEventListener("durationchange",this.handleDurationChange)}},{key:"componentWillReceiveProps",value:function(e){e.url!==this.props.url&&this.setState({needsReload:!0,ended:!1}),e.disabled&&this.setState({duration:0,location:0,volume:.5,playing:!1,percent:0,ended:!1,needsReload:!1})}},{key:"componentDidUpdate",value:function(){this.state.needsReload&&this.setState({needsReload:!1},this.audio.current.load())}},{key:"render",value:function(){var e=this.props.color,t=this.props.url,a=this.props.disabled,n=this.props.title,r=this.state.playing,i=this.state.ended,c=this.state.volume,l=this.state.duration,m=this.getMin(this.getSec(l)),d=this.getExtraSec(this.getSec(l)),u=this.state.location,p=this.getMin(this.getSec(u)),h=this.getExtraSec(this.getSec(u)),v=this.state.percent,g=this.togglePlay,f=this.handleReplay,E=this.handleVolumeUp,b=this.handleVolumeDown,y=this.handleBack,R=this.handleFwd,w=this.getAudio(t);return a?o.a.createElement("div",{className:"player-controls"},w,o.a.createElement(G.a.Group,null,o.a.createElement(G.a,{color:e,icon:"play",className:"player-play",disabled:!0}),o.a.createElement(G.a,{color:e,icon:"backward",className:"player-backward",disabled:!0}),o.a.createElement(G.a,{color:e,icon:"forward",className:"player-forward",disabled:!0})),o.a.createElement(ee.a,{color:e,className:"player-progress",percent:v,label:"".concat(p,":").concat(h<10?0:"").concat(h," / ").concat(m,":").concat(d<10?0:"").concat(d)}),o.a.createElement(G.a.Group,null,o.a.createElement(G.a,{color:e,as:"a",href:t,icon:"download",className:"player-download",disabled:!0,download:!0}),o.a.createElement(G.a,{color:e,icon:"volume down",className:"player-down",onClick:b}),o.a.createElement(G.a,{color:e,icon:"volume up",className:"player-up",onClick:E})),o.a.createElement("div",{className:"volume-indicator"},"Volume: ",10*c,"/10")):o.a.createElement("div",{className:"player-controls"},w,n?o.a.createElement(s.a,{as:"h5",color:"grey",className:"player-title"},"Recorded By: ",n):"",o.a.createElement(G.a.Group,null,i?o.a.createElement(G.a,{color:e,icon:"redo",className:"player-replay",disabled:!(l>0),onClick:f}):r?o.a.createElement(G.a,{color:e,icon:"pause",className:"player-pause",disabled:!(l>0),onClick:g}):o.a.createElement(G.a,{color:e,icon:"play",className:"player-play",disabled:!(l>0),onClick:g}),o.a.createElement(G.a,{color:e,icon:"backward",className:"player-backward",disabled:!(l>0),onClick:y}),o.a.createElement(G.a,{color:e,icon:"forward",className:"player-forward",disabled:!(l>0),onClick:R})),o.a.createElement(ee.a,{color:e,className:"player-progress",percent:v,label:"".concat(p,":").concat(h<10?0:"").concat(h," / ").concat(m,":").concat(d<10?0:"").concat(d)}),o.a.createElement(G.a.Group,null,o.a.createElement(G.a,{color:e,as:"a",href:t,icon:"download",className:"player-download",disabled:!(l>0),download:!0}),o.a.createElement(G.a,{color:e,icon:"volume down",className:"player-down",onClick:b}),o.a.createElement(G.a,{color:e,icon:"volume up",className:"player-up",onClick:E})),o.a.createElement("div",{className:"volume-indicator"},"Volume: ",10*c,"/10"))}}]),t}(o.a.Component),ae=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).state={search:""},e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.prompts,t=this.props.recordings,a=this.props.search;return o.a.createElement("div",{id:"recordings"},o.a.createElement(s.a,{color:"violet",as:"h4"},"Recording Manager:"),o.a.createElement(P.a,null,o.a.createElement(P.a.Group,{widths:16},o.a.createElement(P.a.Field,{width:16},o.a.createElement("label",null,"Search Recordings:"),o.a.createElement(A.a,{fluid:!0,placeholder:"Search...",name:"search",action:{color:"violet",labelPosition:"right",icon:"search",content:"Search",onClick:this.props.sendSearch},onChange:this.props.onUpdateSearch,value:a})))),o.a.createElement(s.a,{as:"h5"},"Recordings In Session:"),o.a.createElement(B.a,{className:"recording-list-manager",divided:!0,verticalAlign:"middle"},e.length>0?e.map(function(e,a){var n=e.promptID,r=t.filter(function(e){return e.promptID===n});return e.promptlistExistsForRoom?o.a.createElement(B.a.Item,{key:a},o.a.createElement(f.a,{name:"chat"}),o.a.createElement(B.a.Content,null,e.prompt),r.length>0?r.map(function(e,t){return o.a.createElement(te,{color:"violet",key:e.recordingID,url:"/audio/".concat(e.filepath),title:e.recorderID})}):o.a.createElement(te,{color:"violet",disabled:!0})):""}):o.a.createElement(s.a,{as:"h2",textAlign:"center",icon:!0,disabled:!0},o.a.createElement(f.a,{name:"list alternate",circular:!0}),o.a.createElement(s.a.Content,null,"No prompts in room yet..."))))}}]),t}(o.a.Component),ne=function(e){function t(){var e,a;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).handleDataRoom=function(t){e._ismounted&&e.setState({settings:t},e.init)},e.handleListPrompts=function(t){e._ismounted&&e.setState({prompts:t})},e.handleListRoomRecordings=function(t){e._ismounted&&e.setState({recordings:t})},e.handleReloadRecordings=function(t){return e.loadRecordings()},e.handleDataPrompt=function(t){var a=e.state.prompts;a.push(t),e._ismounted&&e.setState({prompts:a})},e.init=function(){e.loadPrompts(),e.loadRecordings()},e.handleDataPromptList=function(t){return e.sendSearch},e.loadPrompts=function(){C({roomID:e.state.settings.roomID})},e.loadRecordings=function(){!function(e){D.emit("getRoomRecordingList",e)}({roomID:e.state.settings.roomID,room:e.state.settings.roomKey})},e.sendSearch=function(){var t={roomID:e.state.settings.roomID};""!==e.state.searchString&&(t.search=e.state.searchString),C(t)},e.onUpdateSearch=function(t,a){var n=a.value;return e.setState({searchString:n},e.sendSearch)},e.onQuit=function(t){return e.props.history.push("/admin")},e.state={settings:{roomID:-1,roomKey:"",active:!1,shuffle:!1,created:""},prompts:[],searchString:"",recordings:[]},I(e.handleDataRoom),a=e.handleDataPrompt,D.on("dataPrompt",function(e){return a(e)}),function(e){D.on("listPrompts",function(t){return e(t)})}(e.handleListPrompts),function(e){D.on("dataPromptList",function(t){return e(t)})}(e.handleDataPromptList),function(e){D.on("listRoomRecordings",function(t){return e(t)})}(e.handleListRoomRecordings),function(e){D.on("reloadRecList",function(t){return e(t)})}(e.handleReloadRecordings),e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"render",value:function(){var e=this,t=this.state.settings,a=this.state.settings.roomKey,n=this.props.languages,r=this.state.prompts,i=this.state.recordings,c=[{menuItem:{key:"settings",icon:"settings",content:"Settings"},render:function(){return o.a.createElement(K.a.Pane,{attached:!1},o.a.createElement(Y,{room:a,settings:t}))}},{menuItem:{key:"prompts",icon:"write",content:"Prompts"},render:function(){return o.a.createElement(K.a.Pane,{attached:!1},o.a.createElement(z,{room:a,settings:t,prompts:r,search:e.state.searchString,sendSearch:e.sendSearch,onUpdateSearch:e.onUpdateSearch}))}},{menuItem:{key:"recordings",icon:"microphone",content:"Recordings"},render:function(){return o.a.createElement(K.a.Pane,{attached:!1},o.a.createElement(ae,{room:a,settings:t,prompts:r,recordings:i,search:e.state.searchString,sendSearch:e.sendSearch,onUpdateSearch:e.onUpdateSearch}))}},{menuItem:{key:"import",icon:"upload",content:"Import"},render:function(){return o.a.createElement(K.a.Pane,{attached:!1},o.a.createElement(Z,{languages:n,room:t}))}},{menuItem:{key:"export",icon:"download",content:"Export"},render:function(){return o.a.createElement(K.a.Pane,{attached:!1},o.a.createElement(s.a,{as:"h1",color:"violet"},"Coming soon..."))}}];return o.a.createElement(g.a,{fluid:!0,color:"violet"},o.a.createElement(g.a.Content,null,o.a.createElement(g.a.Header,null,o.a.createElement(f.a,{name:"cog"}),"Managing Room: ",o.a.createElement(s.a,{as:"span",color:"violet"},'"',a,'"'),o.a.createElement(G.a,{floated:"right",size:"mini",icon:"close",color:"red",onClick:this.onQuit})),o.a.createElement(g.a.Description,null,o.a.createElement(K.a,{menu:{color:"violet",borderless:!0,pointing:!0},panes:c}))))}}]),t}(o.a.Component),oe=Object(l.f)(ne),re=a(503),ie=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).onCreate=function(){var t;e.setState({open:!1,roomKey:""}),t={room:e.props.room,copy:e.state.roomKey},D.emit("duplicateRoom",t)},e.onTrigger=function(){e.setState({open:!0})},e.onCancel=function(){e.setState({open:!1,roomKey:""})},e.onRoomKeyChange=function(t){e.setState({roomKey:t.target.value})},e.state={open:!1,roomKey:""},e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.roomKey;return o.a.createElement(re.a,{open:this.state.open,size:"tiny",dimmer:"blurring",trigger:o.a.createElement(G.a,{onClick:this.onTrigger,color:"violet",content:"Duplicate",icon:"copy",labelPosition:"right"})},o.a.createElement(re.a.Header,null,"Please Provide An Existing Room..."),o.a.createElement(re.a.Content,null,o.a.createElement(re.a.Description,null,o.a.createElement("p",null,"Using the duplicate feature, you may provide the name of an existing room to have all of the prompts from that room copied into a new room. Provide an existing room key below to get started."),o.a.createElement(P.a,{id:"room-name-copy"},o.a.createElement(P.a.Field,{width:16},o.a.createElement("label",null,"Existing Room Key:"),o.a.createElement(P.a.Input,{placeholder:"Room Name ...",name:"room",type:"text",value:e,onChange:this.onRoomKeyChange}))))),o.a.createElement(re.a.Actions,null,o.a.createElement(G.a,{color:"yellow",content:"Cancel",icon:"close",labelPosition:"right",onClick:this.onCancel}),o.a.createElement(G.a,{color:"green",content:"Duplicate",icon:"checkmark",labelPosition:"right",onClick:this.onCreate})))}}]),t}(o.a.Component),ce=Object(l.f)(ie),le=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).onCreate=function(){var e;e={room:a.props.room},D.emit("newRoom",e)},a.onCancel=function(){a.props.history.push("/admin")},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(re.a,{open:this.props.open,size:"tiny",dimmer:"blurring"},o.a.createElement(re.a.Header,null,"The Room '",this.props.room,"' Does Not Exist Yet..."),o.a.createElement(re.a.Content,null,o.a.createElement(re.a.Description,null,"Do you wish to create the room '",this.props.room,"'?")),o.a.createElement(re.a.Actions,null,o.a.createElement(G.a,{color:"yellow",content:"Cancel",icon:"close",labelPosition:"right",onClick:this.onCancel}),o.a.createElement(ce,{room:this.props.room}),o.a.createElement(G.a,{color:"green",content:"Create",icon:"checkmark",labelPosition:"right",onClick:this.onCreate})))}}]),t}(o.a.Component),se=Object(l.f)(le),me=function(e){function t(){var e,a;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).handleNewRoom=function(t){e._ismounted&&e.setState({isNew:t})},e.handleDataRoom=function(t){e._ismounted&&e.setState({isNew:!1,active:t.active,roomID:t.roomID})},e.handleListLanguages=function(t){e._ismounted&&e.setState({languages:t})},e.join=function(){var t={room:e.props.match.params.room};D.emit("joinAdmin",t)},e.state={isNew:!1,active:0,roomID:-1,languages:[]},I(e.handleDataRoom),k(e.handleNewRoom),a=e.handleListLanguages,D.on("listLanguages",function(e){return a(e)}),w(e.join),e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0,this.join()}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"render",value:function(){var e=this.props.match.params.room,t=this.state.isNew,a=this.state.languages;return o.a.createElement("div",{className:"App"},o.a.createElement(s.a,{as:"h1",color:"violet"},"Prompt Recorder V2.0 Admin Panel"),o.a.createElement(m.a,{columns:"equal",padded:!0},o.a.createElement(m.a.Column,null,o.a.createElement(se,{room:e,open:t}),o.a.createElement(oe,{room:e,languages:a})),o.a.createElement(m.a.Column,null,o.a.createElement(j,null))))}}]),t}(o.a.Component),de=a(500),ue=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).onTrigger=function(){e.props.updateNewRec()},e.onCancel=function(){e.props.updateNewRec()},e.state={open:!1,roomKey:""},e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(re.a,{open:this.props.newRecorder,size:"tiny",dimmer:"blurring",trigger:o.a.createElement(G.a,{onClick:this.onTrigger,color:"blue",content:"Whats My ID?",icon:"help circle",labelPosition:"right"})},o.a.createElement(re.a.Header,null,"Your Recorder ID:"),o.a.createElement(re.a.Content,null,o.a.createElement(re.a.Description,null,o.a.createElement("p",null,"Please write down the following ID and keep it. This is the only unique identifier for your data. Should you ever want a copy of your data, or have your data removed, this ID must be provided."),o.a.createElement(s.a,{as:"h3",color:"violet"},"Your ID: ",this.props.match.params.userID))),o.a.createElement(re.a.Actions,null,o.a.createElement(G.a,{color:"green",content:"Okay",icon:"check",labelPosition:"right",onClick:this.onCancel})))}}]),t}(o.a.Component),pe=Object(l.f)(ue),he=16e3,ve=1,ge=2048,fe={audio:!0,video:!1},Ee=[],be="https:"===window.location.protocol,ye=!1,Re=!1,we=!1;function De(e){ke(function(){window.hasMicrophone?function(e){D.emit("startRecording",e),V=new AudioContext,(J=V.createScriptProcessor(ge,ve,ve)).connect(V.destination),V.resume();navigator.mediaDevices.getUserMedia(fe).then(function(t){q=t,(W=V.createMediaStreamSource(t)).connect(J),J.onaudioprocess=function(t){e.data=t,function(e){var t=e.data.inputBuffer.getChannelData(0),a=Ie(t,V.sampleRate,he);e.data=a,D.emit("binaryData",e)}(e)}})}(e):alert("NO MICROPHONE ATTACHED. Please connect a microphone device to record with.")})}navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=function(e){navigator.mediaDevices.enumerateDevices().then(e)}),"undefined"!==typeof MediaStreamTrack&&"getSources"in MediaStreamTrack?ye=!0:navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(ye=!0),ke();var Ie=function(e,t,a){if(a===t)return e;if(a>t)throw new Error("downsampling rate show be smaller than original sample rate");for(var n=t/a,o=Math.round(e.length/n),r=new Int16Array(o),i=0,c=0;i<r.length;){for(var l=Math.round((i+1)*n),s=0,m=0,d=c;d<l&&d<e.length;d++)s+=e[d],m++;r[i]=32767*Math.min(1,s/m),i++,c=l}return r.buffer};function ke(e){ye&&(!navigator.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(navigator.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!navigator.enumerateDevices&&navigator.enumerateDevices&&(navigator.enumerateDevices=navigator.enumerateDevices.bind(navigator)),navigator.enumerateDevices?(Ee=[],navigator.enumerateDevices(function(t){t.forEach(function(e){var t,a={};for(var n in e)a[n]=e[n];"audio"===a.kind&&(a.kind="audioinput"),"video"===a.kind&&(a.kind="videoinput"),Ee.forEach(function(e){e.id===a.id&&e.kind===a.kind&&(t=!0)}),t||(a.deviceId||(a.deviceId=a.id),a.id||(a.id=a.deviceId),a.label?("videoinput"!==a.kind||we||(we=!0),"audioinput"!==a.kind||Re||(Re=!0)):(a.label="Please invoke getUserMedia once.",be||(a.label="HTTPs is required to get label of this "+a.kind+" device.")),"audioinput"===a.kind&&(!0,window.hasMicrophone=!0),"audiooutput"===a.kind&&!0,"videoinput"===a.kind&&!0,Ee.push(a))}),e&&e()})):e&&e())}var Ce=function(e){function t(){var e,a;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).onNewRecording=function(t){var a=e.props.match,n={roomID:e.props.room.roomID,recorderID:a.params.userID,promptID:e.props.prompts[e.state.activeIndex].promptID};e._ismounted&&e.setState({activeRecording:t}),S(n)},e.onListRecordings=function(t){e._ismounted&&e.setState({recordings:t})},e.onUpdateRecording=function(t){var a=e.props.match;S({roomID:e.props.room.roomID,recorderID:a.params.userID,promptID:e.props.prompts[e.state.activeIndex].promptID})},e.next=function(){var t=e.props.match,a={roomID:e.props.room.roomID,recorderID:t.params.userID,promptID:e.props.prompts[e.state.activeIndex+1].promptID};e.setState({activeIndex:e.state.activeIndex+1}),S(a)},e.prev=function(){var t=e.props.match,a={roomID:e.props.room.roomID,recorderID:t.params.userID,promptID:e.props.prompts[e.state.activeIndex-1].promptID};e.setState({activeIndex:e.state.activeIndex-1}),S(a)},e.startRecording=function(){var t=e.props.match,a={roomID:e.props.room.roomID,recorderID:t.params.userID,promptID:e.props.prompts[e.state.activeIndex].promptID,sampleRate:he,channels:ve};e.setState({recording:!0}),De(a)},e.stopRecording=function(){var t=e.props.match,a={roomID:e.props.room.roomID,recorderID:t.params.userID,promptID:e.props.prompts[e.state.activeIndex].promptID,recordingID:e.state.activeRecording.recordingID,roomKey:e.props.room.roomKey};e.setState({recording:!1}),function(e){if(q){var t=q.getTracks();t.length>0&&t[0].stop(),W.disconnect(J),J.disconnect(V.destination),V.close().then(function(){W=null,J=null,V=new AudioContext})}else window.hasMicrophone=!1,alert("NO MICROPHONE ATTACHED. Please connect a microphone device to record with.");D.emit("stopRecording",e)}(a)},e.getNavButtons=function(){var t=e.state.activeIndex,a=e.props.prompts.length-1,n=e.props.newRecorder,r=e.props.updateNewRec;return o.a.createElement(G.a.Group,{widths:"3"},o.a.createElement(G.a,{basic:!0,color:"violet",content:"Back",icon:"arrow circle left",labelPosition:"left",disabled:!(t>0),onClick:e.prev}),o.a.createElement(pe,{newRecorder:n,updateNewRec:r}),o.a.createElement(G.a,{color:"violet",content:"Next",icon:"arrow circle right",labelPosition:"right",disabled:!(t<a),onClick:e.next}))},e.getRecordButton=function(){return e.state.recording?o.a.createElement(G.a,{color:"red",content:"Stop Recording",icon:"circle",labelPosition:"right",id:"rec-button",onClick:e.stopRecording}):o.a.createElement(G.a,{color:"red",content:"Start Recording",icon:"circle outline",labelPosition:"right",id:"rec-button",onClick:e.startRecording,disabled:!window.hasMicrophone})},e.getBars=function(){var t=e.state.recording;return o.a.createElement("div",{id:"bars",className:t?"active":""},o.a.createElement("div",{className:"bar"}),o.a.createElement("div",{className:"bar"}),o.a.createElement("div",{className:"bar"}),o.a.createElement("div",{className:"bar"}),o.a.createElement("div",{className:"bar"}),o.a.createElement("div",{className:"bar"}),o.a.createElement("div",{className:"bar"}),o.a.createElement("div",{className:"bar"}),o.a.createElement("div",{className:"bar"}),o.a.createElement("div",{className:"bar"}))},e.getLatestFile=function(){for(var t="",a=0;a<e.state.recordings.length;a++){var n=e.state.recordings[a];if(n.filepath&&""!==n.filepath){t=n.filepath;break}}return t},e.state={activeIndex:0,recording:!1,activeRecording:{recordingID:-1,filepath:"",sampleRate:16e3,channels:1,recorderID:-1,promptID:-1,roomID:-1,recPrompt:"",metrics:{}},recordings:[]},a=e.onNewRecording,D.on("newRecording",function(e){return a(e)}),function(e){D.on("updateRecording",function(t){return e(t)})}(e.onUpdateRecording),function(e){D.on("listRecordings",function(t){return e(t)})}(e.onListRecordings),e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0}},{key:"componentWillUnmount",value:function(){this._ismounted=!1,this.state.recording&&this.stopRecording()}},{key:"componentWillReceiveProps",value:function(e){if(this._ismounted){var t=this.state.activeIndex,a=e.prompts.length-1;if(t>a&&-1!==a&&this.setState({activeIndex:a}),-1===a&&this.setState({activeIndex:0}),e.prompts.length>0){var n=e.match;S({roomID:e.room.roomID,recorderID:n.params.userID,promptID:e.prompts[this.state.activeIndex].promptID})}}}},{key:"render",value:function(){var e=this.props.prompts,t=this.state.activeIndex,a=this.getNavButtons(),n=this.getRecordButton(),r=this.getBars(),i=this.getLatestFile(),c=""!==i?"/audio/".concat(i):"";return e.length>0?o.a.createElement("div",{className:"controller"},o.a.createElement(s.a,{as:"h2",color:"violet"},"Please Read:"),o.a.createElement(s.a,{id:"prompt",as:"h1"},e[t].prompt),r,window.hasMicrophone?n:o.a.createElement(s.a,{as:"h3",color:"red"},"No microphone is available to record."),""!==c?o.a.createElement(te,{color:"violet",url:c}):o.a.createElement(te,{color:"violet",disabled:!0}),a):o.a.createElement("div",{className:"controller"},o.a.createElement(s.a,{as:"h2",textAlign:"center",icon:!0,disabled:!0},o.a.createElement(f.a,{name:"list alternate",circular:!0}),o.a.createElement(s.a.Content,null,"No prompts in session yet, please wait...")))}}]),t}(o.a.Component),Se=Object(l.f)(Ce),je=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).join=function(){var e=a.props.match,t={room:e.params.room,recorder:e.params.userID};D.emit("join",t)},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.join()}},{key:"render",value:function(){var e=this.props.admin,t=this.props.room,a=this.props.userID,n=this.props.prompts,r=this.props.newRecorder,i=this.props.updateNewRec,c=o.a.createElement(T,{steps:[{state:"completed",title:"Join a Room",description:"Enter a room to join",href:"/"},{state:"completed",title:"Provide an ID",description:"Identify the recorder",href:"/"+t.roomKey},{state:"active",title:"Record",description:"Record prompt readings",href:"#"}]});return o.a.createElement(g.a,{fluid:!0,color:"violet"},o.a.createElement(g.a.Content,null,e?"":c,o.a.createElement(g.a.Header,null,o.a.createElement(f.a,{name:"microphone"}),"Recording Prompts In Room",o.a.createElement(s.a,{as:"span",color:"violet"},'"',t.roomKey,'"'),"as Recorder",o.a.createElement(s.a,{as:"span",color:"violet"},'"',a,'"')),o.a.createElement(g.a.Description,null,0===this.props.room.active?o.a.createElement("div",{className:"loader"},o.a.createElement(de.a,{active:!0,size:"massive"}),"Please wait for room to be activated..."):o.a.createElement(Se,{prompts:n,room:t,newRecorder:r,updateNewRec:i}))))}}]),t}(o.a.Component),Oe=Object(l.f)(je),Ne=a(501),Pe=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).onIDChange=function(t,a){var n=a.value;return e.setState({recorderID:n})},e.onAgeChange=function(t,a){var n=a.value;return e.setState({recorderAge:n})},e.onGenderChange=function(t,a){var n=a.value;return e.setState({recorderGender:n})},e.onJoin=function(){var t=e.state.recorderID;t&&""!==t&&t.match(/^[\d+]*$/)&&e.props.history.push(N.a.join(window.location.pathname,t))},e.onCreateRecorder=function(){!function(e){D.emit("newRecorder",e)}({recorderAge:e.state.recorderAge,recorderGender:e.state.recorderGender,room:e.props.room.roomKey})},e.state={recorderID:"",recorderGender:"",recorderAge:""},e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.recorderGender,a=e.recorderID,n=e.recorderAge,r=o.a.createElement(T,{steps:[{state:"completed",title:"Join a Room",description:"Enter a room to join",href:"/"},{state:"active",title:"Provide an ID",description:"Identify the recorder",href:"#"},{state:"disabled",title:"Record",description:"Record prompt readings",href:"#"}]});return o.a.createElement(g.a,{fluid:!0,color:"violet"},o.a.createElement(g.a.Content,null,r,o.a.createElement(g.a.Description,null,o.a.createElement(s.a,{as:"h3",color:"violet"},"Enter a Recorder ID:"),o.a.createElement(P.a,{onSubmit:this.onJoin},o.a.createElement(P.a.Field,{width:16},o.a.createElement("label",null,"Existing Recorder ID:"),o.a.createElement(P.a.Input,{placeholder:"00005",name:"room",type:"number",value:a,onChange:this.onIDChange,action:{color:"violet",labelPosition:"right",icon:"arrow circle right",content:"Verify & Begin Recording",type:"sumbit"}}))),o.a.createElement(Ne.a,{horizontal:!0},"Or"),o.a.createElement(s.a,{as:"h3",color:"violet"},"Create a new ID:"),o.a.createElement(P.a,{onSubmit:this.onCreateRecorder},o.a.createElement(P.a.Group,null,o.a.createElement(P.a.Field,{width:8},o.a.createElement("label",null,"Recorder Age (years):"),o.a.createElement(P.a.Input,{placeholder:"12",name:"room",type:"number",value:n,onChange:this.onAgeChange})),o.a.createElement(P.a.Field,{width:8},o.a.createElement("label",null,"Recorder Gender:"),o.a.createElement(X.a,{placeholder:"Select Gender",fluid:!0,selection:!0,name:"gender",value:t,onChange:this.onGenderChange,options:[{key:"Male",text:"Male",value:"Male"},{key:"Female",text:"Female",value:"Female"},{key:"Unspecified",text:"Unspecified",value:"Unspecified"}]}))),o.a.createElement(G.a,{color:"green",type:"submit",labelPosition:"right",icon:"plus circle",content:"Create & Begin Recording",floated:"right"})))))}}]),t}(o.a.Component),Ae=Object(l.f)(Pe);var xe=function(e){var t=e.room,a=e.userID,n=e.prompts,r=e.newRecorder,i=e.handleUpdateNewRec,c="";return t&&(c=t.roomKey),o.a.createElement("div",{className:"recorder"},a?o.a.createElement(Oe,{room:t,userID:a,newRecorder:r,updateNewRec:i,prompts:n}):""!==c?o.a.createElement(Ae,{room:t}):o.a.createElement(U,null))};var Me=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(s.a,{as:"h1",color:"violet"},"Prompt Recorder V2.0"),o.a.createElement(m.a,{columns:"equal",padded:!0},o.a.createElement(m.a.Column,null,o.a.createElement(xe,null)),o.a.createElement(m.a.Column,null,o.a.createElement(j,null))))};var Le=function(e){var t=e.room;return o.a.createElement("div",{className:"waiter"},o.a.createElement(g.a,{fluid:!0,color:"violet"},o.a.createElement(g.a.Content,null,o.a.createElement(g.a.Header,null,"Please Wait for Room '",t,"' to be initialized..."),o.a.createElement(g.a.Description,null,o.a.createElement(de.a,{active:!0,inline:"centered",size:"massive"})))))},Te=function(e){function t(){var e,a;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(h.a)(t).call(this))).handleNewRoom=function(t){e._ismounted&&e.setState({isNew:t})},e.handleDataRoom=function(t){e._ismounted&&e.setState({room:t},e.GetPrompts)},e.handleListRoomPrompts=function(t){var a=t;1===e.state.room.shuffle&&(a=e.shuffle(a)),e._ismounted&&e.setState({prompts:a})},e.handleNoRecorder=function(t){t.recorder&&e.props.history.push("/"+t.room)},e.handleNewRecorder=function(t){t.recorderID&&(e._ismounted&&e.setState({newRecorder:!0}),e.props.history.push("/".concat(t.room,"/").concat(t.recorderID)))},e.handleUpdateNewRec=function(){e._ismounted&&e.setState({newRecorder:!e.state.newRecorder})},e.shuffle=function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e},e.join=function(){var t=e.props.match,a={room:t.params.room,recorder:t.params.userID};D.emit("join",a)},e.GetPrompts=function(){return t={roomID:e.state.room.roomID},void D.emit("getRoomPrompts",t);var t},e.state={isNew:!1,newRecorder:!1,room:{roomID:-1,roomKey:"",active:0,shuffle:0,created:""},prompts:[]},I(e.handleDataRoom),a=e.handleNoRecorder,D.on("noRecorder",function(e){return a(e)}),function(e){D.on("newRecorder",function(t){return e(t)})}(e.handleNewRecorder),k(e.handleNewRoom),function(e){D.on("listRoomPrompts",function(t){return e(t)})}(e.handleListRoomPrompts),w(e.join),e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this._ismounted=!0,this.join()}},{key:"componentWillUnmount",value:function(){this._ismounted=!1}},{key:"render",value:function(){var e=this.props.match,t=e.params.room,a=e.params.userID,n=this.state.isNew,r=this.state.prompts,i=this.state.newRecorder;return o.a.createElement("div",{className:"App"},o.a.createElement(s.a,{as:"h1",color:"violet"},"Prompt Recorder V2.0"),o.a.createElement(m.a,{columns:"equal",padded:!0},o.a.createElement(m.a.Column,null,n?o.a.createElement(Le,{room:t}):o.a.createElement(xe,{room:this.state.room,userID:a,newRecorder:i,prompts:r,handleUpdateNewRec:this.handleUpdateNewRec})),o.a.createElement(m.a.Column,null,o.a.createElement(j,null))))}}]),t}(o.a.Component),Fe=Object(l.f)(Te);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(c.a,null,o.a.createElement("div",null,o.a.createElement(l.c,null,o.a.createElement(l.a,{path:"/",exact:!0,component:Me}),o.a.createElement(l.a,{path:"/admin",exact:!0,component:_}),o.a.createElement(l.a,{path:"/admin/:room",component:me}),o.a.createElement(l.a,{path:"/:room/:userID(\\d+)?",component:Fe})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[294,1,2]]]);
//# sourceMappingURL=main.541c28f0.chunk.js.map